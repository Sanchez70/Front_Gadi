<div class="{{currentExplan}}">
  <div class="container-{{currentExplan}}">
    <div class="combos-container">
      <!-- <div class="input-group mb-3">
        <div class="combo-container">
          <label for="jornada" class="label_form font-weight-bold">Jornada</label>
          <div class="custom-select">
            <select class="form-control" placeholder="Seleccione la Jornada" (ngModel)="jornadaSeleccionada"
              name="jornada" aria-label="Jornada" aria-describedby="basic-addon1" (change)="onJornadaChange($event)"
              formControlName="carreraSelec">
              <option value=0 disabled selected>Seleccione una opción</option>
              <option *ngFor="let jornada of jornadas" [value]="jornada.id_jornada">{{jornada.descrip_jornada}}</option>
            </select>
          </div>
        </div>
      </div> -->
    </div>
    <div class="container">
      <section class="example-container mat-elevation-z8" tabindex="0">
        <table mat-table [dataSource]="dataSource" matSort>

          <ng-container matColumnDef="cedula" sticky>
            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">CÉDULA</th>
            <td mat-cell *matCellDef="let persona">{{ persona.cedula }}</td>
          </ng-container>

          <ng-container matColumnDef="nombre" sticky>
            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">NOMBRES</th>
            <td mat-cell *matCellDef="let persona">{{ persona.nombre1 }} {{ persona.nombre2 }}</td>
          </ng-container>

          <ng-container matColumnDef="apellido">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">APELLIDOS</th>
            <td mat-cell *matCellDef="let persona">{{ persona.apellido1 }} {{ persona.apellido2 }}</td>
          </ng-container>

          <ng-container matColumnDef="telefono">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">TELÉFONO</th>
            <td mat-cell *matCellDef="let persona">{{ persona.telefono }}</td>
          </ng-container>

          <ng-container matColumnDef="direccion">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">DIRECCIÓN</th>
            <td mat-cell *matCellDef="let persona">{{ persona.direccion }}</td>
          </ng-container>

          <ng-container matColumnDef="correo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">CORREO</th>
            <td mat-cell *matCellDef="let persona">{{ persona.correo }}</td>
          </ng-container>

          <ng-container matColumnDef="edad">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">EDAD</th>
            <td mat-cell *matCellDef="let persona">{{ persona.edad }}</td>
          </ng-container>

          <ng-container matColumnDef="fecha_vinculacion">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">FECHA DE VINCULACIÓN
            </th>
            <td mat-cell *matCellDef="let persona">{{ persona.fecha_vinculacion | date }}</td>
          </ng-container>

          <ng-container matColumnDef="contrato">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">CONTRATO</th>
            <td mat-cell *matCellDef="let persona">{{ contratos[persona.id_persona].nombre_contrato || 'No asignado'
              }}</td>
          </ng-container>

          <ng-container matColumnDef="titulo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">TÍTULO PROFESIONAL
            </th>
            <td mat-cell *matCellDef="let persona">
              <div class="combos-container">

                <div class="combo-container">
                  <div class="custom-select">
                    <select class="form-control" placeholder="Seleccione la Jornada" name="titulo" aria-label="Jornada"
                      aria-describedby="basic-addon1" formControlName="carreraSelec">
                      <option value=0 disabled selected>Seleccione una opción</option>
                      <option *ngFor="let titulo of titulo">{{titulo.nombre_titulo}}</option>
                    </select>
                  </div>
                </div>
              </div>

            </td>
          </ng-container>

          <ng-container matColumnDef="grado">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">GRADO</th>
            <td mat-cell *matCellDef="let persona">{{ grados[persona.id_persona].nombre_grado_ocp || 'No asignado'
              }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </section>
    </div>
    <div class="container">
      <section class="example-container mat-elevation-z8" tabindex="0">
        <div *ngIf="dataSourceAsig && dataSourceAsig.data.length > 0; else noData">
          <div class="contenedorTitulo">
            <button mat-raised-button color="primary" (click)="openModalAsignatura()"
              style="width: 100%;">Agregar</button>
          </div>
          <table mat-table [dataSource]="dataSourceAsig" matSort>
            <ng-container matColumnDef="carrera" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">Carrera</th>
              <td mat-cell *matCellDef="let asignatura" class="carrera-{{currentExplan}}">
                {{asignatura.carrera || 'No asignado'}}</td>
            </ng-container>
            <ng-container matColumnDef="asignatura" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">Asignatura</th>
              <td mat-cell *matCellDef="let asigantura" class="asignatura">{{asigantura.nombreAsignatura}}</td>
            </ng-container>
            <ng-container matColumnDef="paralelo" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">Paralelo</th>
              <td mat-cell *matCellDef="let asignatura">{{ asignatura.paralelo|| 'No asignado'}}</td>
            </ng-container>
            <ng-container matColumnDef="nro_horas" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">Horas</th>
              <td mat-cell *matCellDef="let asigantura">{{asigantura.horaAsignatura}}</td>
            </ng-container>
            <ng-container matColumnDef="jornada" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">Jornada</th>
              <td mat-cell *matCellDef="let asignatura" class="jornada">
                {{asignatura.jornada || 'No asignado'}}</td>
            </ng-container>
            <ng-container matColumnDef="periodo" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">Periodo</th>
              <td mat-cell *matCellDef="let asignatura" class="periodo">{{asignatura.periodo}}</td>
            </ng-container>
            <ng-container matColumnDef="asig_jornada" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color">Editar</th>
              <td mat-cell *matCellDef="let asignatura; let i=index" class="jornada">
                <button class="mat-button" (click)="editarAsignatura(asignatura)">
                  <mat-icon>edit_square</mat-icon>
                </button>
              </td>
            </ng-container>
            <ng-container matColumnDef="eliminar" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color" class="asignar">
                Eliminar</th>
              <td mat-cell *matCellDef="let asignatura; let i=index">
                <button mat-icon-button color="warn" (click)="eliminarAsignatura(asignatura)">
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnsAsig"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsAsig;"></tr>
          </table>
          <div class="total-horas">
            <h3>TOTAL HORAS: {{ horasTotales }}</h3>
          </div>
        </div>
        <ng-template #noData>
          <p style="text-align: center;">No se ha asignado ninguna propuesta aún...</p>
        </ng-template>
      </section>
    </div>

    <div class="container">
      <section class="example-container mat-elevation-z8" tabindex="0">
        <div *ngIf="dataSourceAct && dataSourceAct.data.length > 0; else noData">
          <div class="contenedorTitulo">
            <button mat-raised-button color="primary" routerLink="/editar-actividad" style="width: 100%;" (click)="openModal()">Agregar</button>
          </div>
          <table mat-table [dataSource]="dataSourceAct" matSort>
            <ng-container matColumnDef="nro_horas" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color" [style.text-align]="'center'">Hora Actividad</th>
              <td mat-cell *matCellDef="let actividad" class="horasActividad" [ngClass]="{'repetida': actividad.repetida}">{{actividad.horaActividad}}</td>
            </ng-container>
    
            <ng-container matColumnDef="total_horas" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color" [style.text-align]="'center'">Horas Asignadas</th>
              <td mat-cell *matCellDef="let actividad" class="horasTotales" [ngClass]="{'repetida': actividad.repetida}">{{actividad.horasTotales}}</td>
            </ng-container>
    
            <ng-container matColumnDef="descripcion" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color" [style.text-align]="'center'">Actividad</th>
              <td mat-cell *matCellDef="let actividad" class="descripcion-{{currentExplan}}" [ngClass]="{'repetida': actividad.repetida}">{{actividad.descripcionActividad}}</td>
            </ng-container>
    
            <ng-container matColumnDef="tipo_actividad" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color" [style.text-align]="'center'">Tipo de Actividad</th>
              <td mat-cell *matCellDef="let actividad" class="tipo" [ngClass]="{'repetida': actividad.repetida}">{{actividad.tiposActividad || 'No asignado'}}</td>
            </ng-container>
    
            <ng-container matColumnDef="editar" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color" class="asignar">Editar Horas</th>
              <td mat-cell *matCellDef="let actividad; let i = index">
                <button class="mat-button" (click)="onRowClicked(actividad, i)">
                  <mat-icon>edit_square</mat-icon>
                </button>
              </td>
            </ng-container>
    
            <ng-container matColumnDef="eliminar" sticky>
              <th mat-header-cell *matHeaderCellDef mat-sort-header [style.background-color]="color" class="eliminar">Eliminar</th>
              <td mat-cell *matCellDef="let actividad; let i = index" class="eliminar">
                <button mat-icon-button color="warn" (click)="eliminarActividad(actividad.idActividad,actividad.idDistibutivoActividad)">
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
            </ng-container>
    
            <tr mat-header-row *matHeaderRowDef="displayedColumnsAct" [style.text-align]="'center'"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsAct;" [style.text-align]="'center'"></tr>
          </table>
          <div class="total-horas">
            <h3>TOTAL HORAS: {{ horasTotalesActividad }}</h3>
          </div>
        </div>
        <ng-template #noData>
          <p style="text-align: center;">No se ha asignado ninguna propuesta aún...</p>
        </ng-template>
      </section>
    </div>
    
    
  </div>
  <br>
  <h2 class="{{validador}}" style="margin-left:28rem;">Total de Horas Docentes: {{horasTotalesFinal}}</h2>
  <button class="boton" disabled="{{validador}}" mat-raised-button color="primary"
    style="width: 310px; right: -27rem; height:48px;" (click)="estadoDistributivo()">Guardar</button>

</div>